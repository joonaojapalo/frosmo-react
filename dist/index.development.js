"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),PropTypes=_interopDefault(require("prop-types")),assign=_interopDefault(require("object-assign"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var ERR_SPA_UNAVALIABLE="frosmo.spa is not available, fallback to console.error";function error(e,t){if(!window||!window.frosmo||!window.frosmo.spa)return console.warn(ERR_SPA_UNAVALIABLE),void console.error(e);console.error(e)}var logger={error:error},DOM_EVENT_FROSMO_SPA_READY="frosmo.spa.ready",ModificationService=function(){function o(e){var t=e.id,n=e.onComplete;_classCallCheck(this,o);this._id=t,this._func=n||function(){},this._modificationContextHandle=null,this._fetchModifications=this._fetchModifications.bind(this)}return _createClass(o,[{key:"fetch",value:function(){window&&(window.frosmo&&window.frosmo.spa?this._fetchModifications():window.addEventListener?window.addEventListener(DOM_EVENT_FROSMO_SPA_READY,this._fetchModifications):window.attachEvent?window.attachEvent(DOM_EVENT_FROSMO_SPA_READY,this._fetchModifications):logger.error("Event cannot be attached"))}},{key:"_fetchModifications",value:function(){var t=this;this._modificationContextHandle=window.frosmo.spa.requestBySelector(this._id),this._modificationContextHandle.then(function(e){return t._func(e)}).catch(function(e){logger.error(e),t._func(null)})}},{key:"cancel",value:function(){this._modificationContextHandle&&(this._modificationContextHandle.cancel(),this._modificationContextHandle=null),window.removeEventListener?window.removeEventListener(DOM_EVENT_FROSMO_SPA_READY,this._fetchModifications):window.detachEvent?window.detachEvent(DOM_EVENT_FROSMO_SPA_READY,this._fetchModifications):logger.error("Event cannot be detached"),this._func=null}}]),o}(),ErrorBoundary=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={isError:!1},e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidCatch",value:function(e,t){if("object"===_typeof(e)){var n=e.message,o=e.stack;(n||o)&&logger.error(n,o)}var r=this.props.onError;r&&r(e,t)}},{key:"render",value:function(){return this.state.isError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{isError:!0}}}]),t}();ErrorBoundary.propTypes={onError:PropTypes.func};var _States$DEFAULT,_transitions,StateMachine=function(){function n(e,t){if(_classCallCheck(this,n),this._transitions=e,!this._transitions[t])throw new Error("invalid initial state");this._state=t}return _createClass(n,[{key:"update",value:function(e){var t=this._transitions[this._state];if(t){var n=t[e];n&&(this._state=n)}}},{key:"state",get:function(){return this._state}}]),n}(),States={DEFAULT:"default",NULL:"null",SUCCESS:"success"},Tokens={FETCH_RESOLVE:"onFetchResolve",ERROR:"onError"},transitions=(_defineProperty(_transitions={},States.DEFAULT,(_defineProperty(_States$DEFAULT={},Tokens.FETCH_RESOLVE,States.SUCCESS),_defineProperty(_States$DEFAULT,Tokens.ERROR,States.NULL),_States$DEFAULT)),_defineProperty(_transitions,States.NULL,_defineProperty({},Tokens.FETCH_RESOLVE,States.SUCCESS)),_defineProperty(_transitions,States.SUCCESS,_defineProperty({},Tokens.ERROR,States.DEFAULT)),_transitions);function withModification(t){return function(e){function n(e){var t;return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e))).onError=t.onError.bind(_assertThisInitialized(t)),e.id||console&&console.warn&&console.warn('FrosmoPlacement: "id" property missing.',e),t.stateMachine=new StateMachine(transitions,States.DEFAULT),t.state={state:t.stateMachine.state,modificationContext:null},t._modificationContextService=new ModificationService({id:e.id,onComplete:function(e){t.stateMachine.update(Tokens.FETCH_RESOLVE),t.setState({modificationContext:e,state:t.stateMachine.state})}}),t}return _inherits(n,React.Component),_createClass(n,[{key:"componentWillUnmount",value:function(){this._modificationContextService.cancel()}},{key:"componentDidMount",value:function(){this._modificationContextService.fetch()}},{key:"onError",value:function(e,t){this.stateMachine.update(Tokens.ERROR),this.setState({state:this.stateMachine.state}),this.props.onError&&this.props.onError(e,t)}},{key:"render",value:function(){switch(this.state.state){case States.DEFAULT:var e=this.props.defaultComponent;return e?React__default.createElement(ErrorBoundary,{onError:this.onError,key:"default"},React__default.createElement(e,this.props)):null;case States.SUCCESS:return React__default.createElement(ErrorBoundary,{onError:this.onError,key:"success"},React__default.createElement(t,_extends({modificationContext:this.state.modificationContext},this.props)));case States.NULL:default:return null}}}]),n}()}var _createReactElement=function(e){return e?React__default.createElement(e):null},hasChildren=function(e){return e&&0<React__default.Children.count(e)},buildMessageProps=function(e){return _objectSpread({},e.params,{frosmoModificationContext:e})},createReactComponent=function(e,t,n){return e?React__default.createElement(e,n):hasChildren(t)?React__default.Children.map(t,function(e){var t=assign({},e.props,n);return React__default.createElement(e.type,t)}):null},_renderSuccess=function(e){var t=e.children,n=e.component,o=e.defaultComponent,r=e.modificationContext,i=buildMessageProps(r),s=createReactComponent(n,t,i);return s?(r.setDisplayed(),s):_createReactElement(o)};function ChildComponent(e){var t=e.defaultComponent;return null!==e.modificationContext?_renderSuccess(e):_createReactElement(t)}var ModificationContextPropTypes={variation:PropTypes.number.isRequired,params:PropTypes.object.isRequired,content:PropTypes.string.isRequired,setDisplayed:PropTypes.func.isRequired,setClicked:PropTypes.func.isRequired,setTrueDisplayed:PropTypes.func.isRequired,setTrackableElements:PropTypes.func.isRequired,startTracking:PropTypes.func.isRequired,error:PropTypes.func.isRequired,clear:PropTypes.func.isRequired},FrosmoPropTypes={children:PropTypes.node,modificationContext:PropTypes.exact(ModificationContextPropTypes)},FrosmoComponentDefaultProps={children:null,component:null,defaultComponent:null,modificationContext:null},FrosmoPlacement=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){var e=this.props.modificationContext;null!==e&&(e.setTrackableElements(this.frosmoMessage),e.startTracking())}},{key:"render",value:function(){var t=this,e=React__default.createElement(ChildComponent,this.props);return this.props.useFragment?React__default.createElement(React__default.Fragment,null,e):React__default.createElement("div",{"data-frosmo-elementid":this.props.id,ref:function(e){t.frosmoMessage=e}},e)}}]),t}();FrosmoPlacement.propTypes=FrosmoPropTypes,FrosmoPlacement.defaultProps=FrosmoComponentDefaultProps;var FrosmoPlacement$1=withModification(FrosmoPlacement);exports.FrosmoPlacement=FrosmoPlacement$1;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZGV2ZWxvcG1lbnQuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy9sb2dnZXIuanMiLCIuLi9zcmMvc2VydmljZXMvTW9kaWZpY2F0aW9uU2VydmljZS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5L0Vycm9yQm91bmRhcnkuanMiLCIuLi9zcmMvdXRpbHMvU3RhdGVNYWNoaW5lLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvaG9jcy93aXRoTW9kaWZpY2F0aW9uLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvZnJvc21vLXBsYWNlbWVudC9DaGlsZENvbXBvbmVudC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL2Zyb3Ntby1wbGFjZW1lbnQvc2hhcGVzLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvZnJvc21vLXBsYWNlbWVudC9Gcm9zbW9QbGFjZW1lbnQuanMiLCIuLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIF9fREVWX18gKi9cbmNvbnN0IEVSUl9TUEFfVU5BVkFMSUFCTEUgPSAnZnJvc21vLnNwYSBpcyBub3QgYXZhaWxhYmxlLCBmYWxsYmFjayB0byBjb25zb2xlLmVycm9yJztcblxuZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdHJhY2UpIHtcbiAgICBpZiAoIXdpbmRvdyB8fCAhd2luZG93LmZyb3NtbyB8fCAhd2luZG93LmZyb3Ntby5zcGEpIHtcbiAgICAgICAgY29uc29sZS53YXJuKEVSUl9TUEFfVU5BVkFMSUFCTEUpO1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgbWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHdpbmRvdy5mcm9zbW8uc3BhLmxvZy5lcnJvcihtZXNzYWdlLCAnc3BhLnJlYWN0LnBsYWNlbWVudCcsIHtcbiAgICAgICAgdHJhY2U6IHRyYWNlIHx8ICcnLFxuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZXJyb3IsXG59XG4iLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi91dGlscy9sb2dnZXJcIjtcblxuY29uc3QgRE9NX0VWRU5UX0ZST1NNT19TUEFfUkVBRFkgPSAnZnJvc21vLnNwYS5yZWFkeSc7XG5cblxuY2xhc3MgTW9kaWZpY2F0aW9uU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoeyBpZCwgb25Db21wbGV0ZSB9KSB7XG4gICAgICAgIGNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuICAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgICB0aGlzLl9mdW5jID0gb25Db21wbGV0ZSB8fCBub29wO1xuXG4gICAgICAgIHRoaXMuX21vZGlmaWNhdGlvbkNvbnRleHRIYW5kbGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9mZXRjaE1vZGlmaWNhdGlvbnMgPSB0aGlzLl9mZXRjaE1vZGlmaWNhdGlvbnMuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBmZXRjaCgpIHtcbiAgICAgICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aW5kb3cuZnJvc21vICYmIHdpbmRvdy5mcm9zbW8uc3BhKSB7XG4gICAgICAgICAgICB0aGlzLl9mZXRjaE1vZGlmaWNhdGlvbnMoKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoRE9NX0VWRU5UX0ZST1NNT19TUEFfUkVBRFksIHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoRE9NX0VWRU5UX0ZST1NNT19TUEFfUkVBRFksIHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0V2ZW50IGNhbm5vdCBiZSBhdHRhY2hlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2ZldGNoTW9kaWZpY2F0aW9ucygpIHtcbiAgICAgICAgdGhpcy5fbW9kaWZpY2F0aW9uQ29udGV4dEhhbmRsZSA9IHdpbmRvdy5mcm9zbW8uc3BhLnJlcXVlc3RCeVNlbGVjdG9yKHRoaXMuX2lkKTtcbiAgICAgICAgdGhpcy5fbW9kaWZpY2F0aW9uQ29udGV4dEhhbmRsZVxuICAgICAgICAgICAgLnRoZW4oY29udGV4dCA9PiB0aGlzLl9mdW5jKGNvbnRleHQpKVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Z1bmMobnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tb2RpZmljYXRpb25Db250ZXh0SGFuZGxlKSB7XG4gICAgICAgICAgICB0aGlzLl9tb2RpZmljYXRpb25Db250ZXh0SGFuZGxlLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy5fbW9kaWZpY2F0aW9uQ29udGV4dEhhbmRsZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgIERPTV9FVkVOVF9GUk9TTU9fU1BBX1JFQURZLFxuICAgICAgICAgICAgICAgIHRoaXMuX2ZldGNoTW9kaWZpY2F0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZGV0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5kZXRhY2hFdmVudChcbiAgICAgICAgICAgICAgICBET01fRVZFTlRfRlJPU01PX1NQQV9SRUFEWSxcbiAgICAgICAgICAgICAgICB0aGlzLl9mZXRjaE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0V2ZW50IGNhbm5vdCBiZSBkZXRhY2hlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZnVuYyA9IG51bGw7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RpZmljYXRpb25TZXJ2aWNlO1xuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVycm9yQm91bmRhcnkgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNFcnJvcjogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkQ2F0Y2ggKGVycm9yLCBpbmZvKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCB7IG1lc3NhZ2UsIHN0YWNrIH0gPSBlcnJvcjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlIHx8IHN0YWNrKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG1lc3NhZ2UsIHN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvciwgaW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuaXNFcnJvciA/IG51bGwgOiB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgIH1cbn1cblxuRXJyb3JCb3VuZGFyeS5wcm9wVHlwZXMgPSB7XG4gICAgb25FcnJvcjogUHJvcFR5cGVzLmZ1bmMsXG59XG4iLCJjbGFzcyBTdGF0ZU1hY2hpbmUge1xuICAgIGNvbnN0cnVjdG9yICh0cmFuc2l0aW9ucywgaW5pdGlhbFN0YXRlKSB7XG4gICAgICAgIHRoaXMuX3RyYW5zaXRpb25zID0gdHJhbnNpdGlvbnM7XG5cbiAgICAgICAgaWYgKCF0aGlzLl90cmFuc2l0aW9uc1tpbml0aWFsU3RhdGVdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgaW5pdGlhbCBzdGF0ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBpbml0aWFsU3RhdGU7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfVxuXG4gICAgdXBkYXRlKHRva2VuKSB7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zaXRpb24gPSB0aGlzLl90cmFuc2l0aW9uc1t0aGlzLl9zdGF0ZV07XG5cbiAgICAgICAgaWYgKCFuZXdUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IG5ld1RyYW5zaXRpb25bdG9rZW5dO1xuXG4gICAgICAgIGlmICghbmV3U3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3N0YXRlID0gbmV3U3RhdGU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdGF0ZU1hY2hpbmU7XG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IE1vZGlmaWNhdGlvblNlcnZpY2UgZnJvbSAnLi4vLi4vc2VydmljZXMvTW9kaWZpY2F0aW9uU2VydmljZSc7XG5pbXBvcnQgRXJyb3JCb3VuZGFyeSBmcm9tICcuLi9lcnJvci1ib3VuZGFyeS9FcnJvckJvdW5kYXJ5JztcbmltcG9ydCBTdGF0ZU1hY2hpbmUgZnJvbSAnLi4vLi4vdXRpbHMvU3RhdGVNYWNoaW5lJztcblxuXG5jb25zdCBTdGF0ZXMgPSB7XG4gICAgREVGQVVMVDogJ2RlZmF1bHQnLFxuICAgIE5VTEw6ICdudWxsJyxcbiAgICBTVUNDRVNTOiAnc3VjY2VzcycsXG59O1xuXG5jb25zdCBUb2tlbnMgPSB7XG4gICAgRkVUQ0hfUkVTT0xWRTogJ29uRmV0Y2hSZXNvbHZlJyxcbiAgICBFUlJPUjogJ29uRXJyb3InLFxufTtcblxuY29uc3QgdHJhbnNpdGlvbnMgPSB7XG4gICAgW1N0YXRlcy5ERUZBVUxUXToge1xuICAgICAgICBbVG9rZW5zLkZFVENIX1JFU09MVkVdOiBTdGF0ZXMuU1VDQ0VTUyxcbiAgICAgICAgW1Rva2Vucy5FUlJPUl06IFN0YXRlcy5OVUxMLFxuICAgIH0sXG4gICAgW1N0YXRlcy5OVUxMXToge1xuICAgICAgICBbVG9rZW5zLkZFVENIX1JFU09MVkVdOiBTdGF0ZXMuU1VDQ0VTUyxcbiAgICB9LFxuICAgIFtTdGF0ZXMuU1VDQ0VTU106IHtcbiAgICAgICAgW1Rva2Vucy5FUlJPUl06IFN0YXRlcy5ERUZBVUxULFxuICAgIH0sXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdpdGhNb2RpZmljYXRpb24oV3JhcHBlZENvbXBvbmVudCkge1xuICAgIHJldHVybiBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgICAgIHRoaXMub25FcnJvciA9IHRoaXMub25FcnJvci5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAoIXByb3BzLmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZSAmJiBjb25zb2xlLndhcm4gJiYgY29uc29sZS53YXJuKCdGcm9zbW9QbGFjZW1lbnQ6IFwiaWRcIiBwcm9wZXJ0eSBtaXNzaW5nLicsIHByb3BzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbWFuYWdlIG1vZGlmaWNhdGlvbiBzdGF0ZSBhcyBzdGF0ZSBhdXRvbWF0YVxuICAgICAgICAgICAgdGhpcy5zdGF0ZU1hY2hpbmUgPSBuZXcgU3RhdGVNYWNoaW5lKHRyYW5zaXRpb25zLCBTdGF0ZXMuREVGQVVMVCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGVNYWNoaW5lLnN0YXRlLFxuICAgICAgICAgICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHQ6IG51bGwsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLl9tb2RpZmljYXRpb25Db250ZXh0U2VydmljZSA9IG5ldyBNb2RpZmljYXRpb25TZXJ2aWNlKHtcbiAgICAgICAgICAgICAgICBpZDogcHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKG1vZGlmaWNhdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1hY2hpbmUudXBkYXRlKFRva2Vucy5GRVRDSF9SRVNPTFZFKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmljYXRpb25Db250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGVNYWNoaW5lLnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5fbW9kaWZpY2F0aW9uQ29udGV4dFNlcnZpY2UuY2FuY2VsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWNhdGlvbkNvbnRleHRTZXJ2aWNlLmZldGNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICBvbkVycm9yKGVycm9yLCBpbmZvKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlTWFjaGluZS51cGRhdGUoVG9rZW5zLkVSUk9SKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlTWFjaGluZS5zdGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25FcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25FcnJvcihlcnJvciwgaW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXIoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5ERUZBVUxUOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBEZWZhdWx0Q29tcG9uZW50ID0gdGhpcy5wcm9wcy5kZWZhdWx0Q29tcG9uZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghRGVmYXVsdENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEVycm9yQm91bmRhcnkgb25FcnJvcj17dGhpcy5vbkVycm9yfSBrZXk9XCJkZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlZmF1bHRDb21wb25lbnQgey4uLnRoaXMucHJvcHN9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLlNVQ0NFU1M6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8RXJyb3JCb3VuZGFyeSBvbkVycm9yPXt0aGlzLm9uRXJyb3J9IGtleT1cInN1Y2Nlc3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8V3JhcHBlZENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmljYXRpb25Db250ZXh0PXt0aGlzLnN0YXRlLm1vZGlmaWNhdGlvbkNvbnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5OVUxMOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBhc3NpZ24gZnJvbSAnb2JqZWN0LWFzc2lnbic7XG5cblxuY29uc3QgX2NyZWF0ZVJlYWN0RWxlbWVudCA9IGNvbXBvbmVudCA9PlxuICAgIGNvbXBvbmVudFxuICAgICAgICA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50KVxuICAgICAgICA6IG51bGw7XG5cbmNvbnN0IGhhc0NoaWxkcmVuID0gKGNoaWxkcmVuKSA9PiBjaGlsZHJlbiAmJiBSZWFjdC5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgPiAwO1xuY29uc3QgYnVpbGRNZXNzYWdlUHJvcHMgPSAobW9kaWZpY2F0aW9uQ29udGV4dCkgPT4ge1xuICAgIC8vIFNldCB0ZW1wbGF0ZURlZmF1bHRzIGFzIHByb3BzXG4gICAgY29uc3QgeyBwYXJhbXMgfSA9IG1vZGlmaWNhdGlvbkNvbnRleHQ7XG5cbiAgICAvLyBCdWlsZCBwcm9wcyBmb3IgbW9kaWZpY2F0aW9uIGNvbXBvbmVudFxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgZnJvc21vTW9kaWZpY2F0aW9uQ29udGV4dDogbW9kaWZpY2F0aW9uQ29udGV4dCxcbiAgICB9O1xufTtcblxuY29uc3QgY3JlYXRlUmVhY3RDb21wb25lbnQgPSAoY29tcG9uZW50LCBjaGlsZHJlbiwgbWVzc2FnZVByb3BzKSA9PiB7XG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb21wb25lbnQsIG1lc3NhZ2VQcm9wcyk7XG4gICAgfSBlbHNlIGlmIChoYXNDaGlsZHJlbihjaGlsZHJlbikpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLm1hcChjaGlsZHJlbiwgY2hpbGQgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRQcm9wcyA9IGFzc2lnbih7fSwgY2hpbGQucHJvcHMsIG1lc3NhZ2VQcm9wcyk7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjaGlsZC50eXBlLCBjaGlsZFByb3BzKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDdXN0b20gUmVhY3QgY29tcG9uZW50IHByb3ZpZGVkIGJ5IEZyb3NtbyAoSm9vbmEgT2phcGFsbylcbiAqL1xuY29uc3QgX3JlbmRlclN1Y2Nlc3MgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIGNoaWxkcmVuLFxuICAgICAgICBjb21wb25lbnQsXG4gICAgICAgIGRlZmF1bHRDb21wb25lbnQsXG4gICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHQsXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgbWVzc2FnZVByb3BzID0gYnVpbGRNZXNzYWdlUHJvcHMobW9kaWZpY2F0aW9uQ29udGV4dCk7XG4gICAgY29uc3Qgb3V0cHV0Q29tcG9uZW50ID0gY3JlYXRlUmVhY3RDb21wb25lbnQoY29tcG9uZW50LCBjaGlsZHJlbiwgbWVzc2FnZVByb3BzKTtcblxuICAgIC8vIERpc3BsYXkgdHJhY2tpbmdcbiAgICBpZiAoIW91dHB1dENvbXBvbmVudCkge1xuICAgICAgICAvLyBTaG93IGRlZmF1bHRDb21wb25lbnRcbiAgICAgICAgcmV0dXJuIF9jcmVhdGVSZWFjdEVsZW1lbnQoZGVmYXVsdENvbXBvbmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbW9kaWZpY2F0aW9uQ29udGV4dC5zZXREaXNwbGF5ZWQoKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dENvbXBvbmVudDtcbiAgICB9XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGNvbnN0IHtcbiAgICAgICAgZGVmYXVsdENvbXBvbmVudCxcbiAgICAgICAgbW9kaWZpY2F0aW9uQ29udGV4dFxuICAgIH0gPSBwcm9wcztcblxuICAgIGlmIChtb2RpZmljYXRpb25Db250ZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBfcmVuZGVyU3VjY2Vzcyhwcm9wcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9jcmVhdGVSZWFjdEVsZW1lbnQoZGVmYXVsdENvbXBvbmVudCk7XG59O1xuIiwiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IE1vZGlmaWNhdGlvbkNvbnRleHRQcm9wVHlwZXMgPSB7XG4gICAgdmFyaWF0aW9uOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgcGFyYW1zOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29udGVudDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNldERpc3BsYXllZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBzZXRDbGlja2VkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldFRydWVEaXNwbGF5ZWQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc2V0VHJhY2thYmxlRWxlbWVudHM6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc3RhcnRUcmFja2luZzogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBlcnJvcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBjbGVhcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufVxuXG5jb25zdCBGcm9zbW9Qcm9wVHlwZXMgPSB7XG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuICAgIG1vZGlmaWNhdGlvbkNvbnRleHQ6IFByb3BUeXBlcy5leGFjdChNb2RpZmljYXRpb25Db250ZXh0UHJvcFR5cGVzKSxcbn07XG5cbmV4cG9ydCB7XG4gICAgRnJvc21vUHJvcFR5cGVzLFxufVxuIiwiLyogZ2xvYmFsIGZyb3NtbyAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IENoaWxkQ29tcG9uZW50IGZyb20gJy4vQ2hpbGRDb21wb25lbnQnO1xuXG5pbXBvcnQgeyBGcm9zbW9Qcm9wVHlwZXMgfSBmcm9tIFwiLi9zaGFwZXNcIjtcblxuY29uc3QgRnJvc21vQ29tcG9uZW50RGVmYXVsdFByb3BzID0ge1xuICAgIGNoaWxkcmVuOiBudWxsLFxuICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICBkZWZhdWx0Q29tcG9uZW50OiBudWxsLFxuICAgIG1vZGlmaWNhdGlvbkNvbnRleHQ6IG51bGwsXG59O1xuXG5jbGFzcyBGcm9zbW9QbGFjZW1lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc3QgeyBtb2RpZmljYXRpb25Db250ZXh0IH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAobW9kaWZpY2F0aW9uQ29udGV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gc3RhcnQgdHJhY2tpbmcgdGhlIG1lc3NhZ2VcbiAgICAgICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHQuc2V0VHJhY2thYmxlRWxlbWVudHModGhpcy5mcm9zbW9NZXNzYWdlKTtcbiAgICAgICAgICAgIG1vZGlmaWNhdGlvbkNvbnRleHQuc3RhcnRUcmFja2luZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICAvLyBQYXNzIHN0YXRlIGFzIGltbXV0YWJsZSBwcm9wc1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gPENoaWxkQ29tcG9uZW50IHsuLi50aGlzLnByb3BzfSAvPjtcblxuICAgICAgICAvLyBXcmFwIGluIGZyYWdtZW50XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnVzZUZyYWdtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gPFJlYWN0LkZyYWdtZW50PntlbGVtZW50fTwvUmVhY3QuRnJhZ21lbnQ+O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV3JhcCBpbnNpZGUgYSB0cmFja2FibGUgZGl2IGVsZW1lbnRcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBkYXRhLWZyb3Ntby1lbGVtZW50aWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAgICAgICAgICAgcmVmPXsgcmVmID0+IHsgdGhpcy5mcm9zbW9NZXNzYWdlID0gcmVmOyB9IH0+XG5cbiAgICAgICAgICAgICAgICAgICAge2VsZW1lbnR9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbkZyb3Ntb1BsYWNlbWVudC5wcm9wVHlwZXMgPSBGcm9zbW9Qcm9wVHlwZXM7XG5Gcm9zbW9QbGFjZW1lbnQuZGVmYXVsdFByb3BzID0gRnJvc21vQ29tcG9uZW50RGVmYXVsdFByb3BzO1xuXG5leHBvcnQgZGVmYXVsdCBGcm9zbW9QbGFjZW1lbnQ7XG4iLCJpbXBvcnQgd2l0aE1vZGlmaWNhdGlvbiBmcm9tICcuL2NvbXBvbmVudHMvaG9jcy93aXRoTW9kaWZpY2F0aW9uJztcbmltcG9ydCBGcm9zbW9QbGFjZW1lbnRDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnRzL2Zyb3Ntby1wbGFjZW1lbnQnO1xuXG5jb25zdCBGcm9zbW9QbGFjZW1lbnQgPSB3aXRoTW9kaWZpY2F0aW9uKEZyb3Ntb1BsYWNlbWVudENvbXBvbmVudCk7XG5cbmV4cG9ydCB7XG4gICAgRnJvc21vUGxhY2VtZW50LFxufTtcbiJdLCJuYW1lcyI6WyJFUlJfU1BBX1VOQVZBTElBQkxFIiwiZXJyb3IiLCJtZXNzYWdlIiwidHJhY2UiLCJ3aW5kb3ciLCJmcm9zbW8iLCJzcGEiLCJjb25zb2xlIiwid2FybiIsIkRPTV9FVkVOVF9GUk9TTU9fU1BBX1JFQURZIiwiTW9kaWZpY2F0aW9uU2VydmljZSIsImlkIiwib25Db21wbGV0ZSIsIl9pZCIsIl9mdW5jIiwiX21vZGlmaWNhdGlvbkNvbnRleHRIYW5kbGUiLCJfZmV0Y2hNb2RpZmljYXRpb25zIiwidGhpcyIsImJpbmQiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJsb2dnZXIiLCJyZXF1ZXN0QnlTZWxlY3RvciIsInRoZW4iLCJjb250ZXh0IiwiX3RoaXMiLCJjYXRjaCIsImNhbmNlbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsIkVycm9yQm91bmRhcnkiLCJzdGF0ZSIsImlzRXJyb3IiLCJDb21wb25lbnQiLCJpbmZvIiwiX3R5cGVvZiIsInN0YWNrIiwib25FcnJvciIsInByb3BzIiwiY2hpbGRyZW4iLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJmdW5jIiwiU3RhdGVNYWNoaW5lIiwidHJhbnNpdGlvbnMiLCJpbml0aWFsU3RhdGUiLCJfdHJhbnNpdGlvbnMiLCJFcnJvciIsIl9zdGF0ZSIsInRva2VuIiwibmV3VHJhbnNpdGlvbiIsIm5ld1N0YXRlIiwiU3RhdGVzIiwiREVGQVVMVCIsIk5VTEwiLCJTVUNDRVNTIiwiVG9rZW5zIiwiRkVUQ0hfUkVTT0xWRSIsIkVSUk9SIiwid2l0aE1vZGlmaWNhdGlvbiIsIldyYXBwZWRDb21wb25lbnQiLCJzdGF0ZU1hY2hpbmUiLCJtb2RpZmljYXRpb25Db250ZXh0IiwiX21vZGlmaWNhdGlvbkNvbnRleHRTZXJ2aWNlIiwidXBkYXRlIiwic2V0U3RhdGUiLCJmZXRjaCIsIkRlZmF1bHRDb21wb25lbnQiLCJkZWZhdWx0Q29tcG9uZW50IiwiUmVhY3QiLCJrZXkiLCJfY3JlYXRlUmVhY3RFbGVtZW50IiwiY29tcG9uZW50IiwiY3JlYXRlRWxlbWVudCIsImhhc0NoaWxkcmVuIiwiQ2hpbGRyZW4iLCJjb3VudCIsImJ1aWxkTWVzc2FnZVByb3BzIiwicGFyYW1zIiwiZnJvc21vTW9kaWZpY2F0aW9uQ29udGV4dCIsImNyZWF0ZVJlYWN0Q29tcG9uZW50IiwibWVzc2FnZVByb3BzIiwibWFwIiwiY2hpbGQiLCJjaGlsZFByb3BzIiwiYXNzaWduIiwidHlwZSIsIl9yZW5kZXJTdWNjZXNzIiwib3V0cHV0Q29tcG9uZW50Iiwic2V0RGlzcGxheWVkIiwiTW9kaWZpY2F0aW9uQ29udGV4dFByb3BUeXBlcyIsInZhcmlhdGlvbiIsIm51bWJlciIsImlzUmVxdWlyZWQiLCJvYmplY3QiLCJjb250ZW50Iiwic3RyaW5nIiwic2V0Q2xpY2tlZCIsInNldFRydWVEaXNwbGF5ZWQiLCJzZXRUcmFja2FibGVFbGVtZW50cyIsInN0YXJ0VHJhY2tpbmciLCJjbGVhciIsIkZyb3Ntb1Byb3BUeXBlcyIsIm5vZGUiLCJleGFjdCIsIkZyb3Ntb0NvbXBvbmVudERlZmF1bHRQcm9wcyIsIkZyb3Ntb1BsYWNlbWVudCIsImZyb3Ntb01lc3NhZ2UiLCJlbGVtZW50IiwiQ2hpbGRDb21wb25lbnQiLCJ1c2VGcmFnbWVudCIsIkZyYWdtZW50IiwicmVmIiwiZGVmYXVsdFByb3BzIiwiRnJvc21vUGxhY2VtZW50Q29tcG9uZW50Il0sIm1hcHBpbmdzIjoiMDRFQUNBLElBQU1BLG9CQUFzQix5REFFNUIsU0FBU0MsTUFBTUMsRUFBU0MsT0FDZkMsU0FBV0EsT0FBT0MsU0FBV0QsT0FBT0MsT0FBT0MsV0FDNUNDLFFBQVFDLEtBQUtSLDBCQUNiTyxRQUFRTixNQUFNQyxHQUtkSyxRQUFRTixNQUFNQyxHQWF0QixXQUFlLENBQ1hELE1BQUFBLE9DdkJFUSwyQkFBNkIsbUJBRzdCQyxpREFDWUMsSUFBQUEsR0FBSUMsSUFBQUEsd0NBR1RDLElBQU1GLE9BQ05HLE1BQVFGLEdBSEEsa0JBS1JHLDJCQUE2QixVQUM3QkMsb0JBQXNCQyxLQUFLRCxvQkFBb0JFLEtBQUtELDJEQUlwRGIsU0FJREEsT0FBT0MsUUFBVUQsT0FBT0MsT0FBT0MsU0FDMUJVLHNCQUNFWixPQUFPZSxpQkFDZGYsT0FBT2UsaUJBQWlCViwyQkFBNEJRLEtBQUtELHFCQUNsRFosT0FBT2dCLFlBQ2RoQixPQUFPZ0IsWUFBWVgsMkJBQTRCUSxLQUFLRCxxQkFFcERLLE9BQU9wQixNQUFNLDJGQUtaYywyQkFBNkJYLE9BQU9DLE9BQU9DLElBQUln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
